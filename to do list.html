<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>
    <link rel="stylesheet" href="">

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

</head>
<body class="bg-gray-900 flex items-center justify-center h-screen">
    
    <section class="bg-gray-950 p-8 rounded-lg shadow-lg w-[800px]">
        <h1 class="text-2xl text-white mb-4 text-center">To Do List</h1>

        <div class="flex mb-4">
            <input type="text" id="input" class="flex-grow p-2 rounded-l-lg border border-gray-600 focus:outline-none placeholder:text-gray-500 text-white" placeholder="Add a new task">
            <button id="add" class="bg-blue-600 text-white p-3 rounded-r-lg hover:bg-blue-700">Add</button>
        </div>

        <ul id="tasks" class="list-none list-inside text-gray-100 text-lg p-3">
            <!-- Tasks will appear here -->
        </ul>
    </section>



    <script>

        let add = document.getElementById('add');
        let input = document.getElementById('input');
        let tasks = document.getElementById('tasks');
        let apdate = document.getElementById('apdate');
        let remove = document.getElementById('delete');
        let mode = 'add';
        let tmp;
        let taskList;

        if(localStorage.works != null) {
            taskList = JSON.parse(localStorage.getItem('works'));
        } else {
            taskList = [];
        }
        
        add.addEventListener('click', function() {
            let obj = {view: input.value};
            
            if(mode === 'add') {
                taskList.push(obj); 
            } else if(mode === 'apdate') {
                taskList[tmp] = obj;
                mode = 'add';
                add.innerHTML = 'Add';
            }
            
            localStorage.setItem('works', JSON.stringify(taskList) );
            displayTasks();
            
            input.value = '';
        });
        
    function displayTasks() {
        tasks.innerHTML = "";

            
        for(let i=0; i<taskList.length; i++) {
            tasks.innerHTML += `
                <li id="li-${i}" class="bg-gray-800 p-3 rounded-lg m-3 flex items-center ">
                    
       
                <input onclick="right(${i})" type="checkbox" id="checkboxRight-${i}" class="mx-2 cursor-pointer"> 
                <span class='flex-1'>${taskList[i].view}</span>
                <div class="flex ml-auto">
                        <div id="apdate" class="mx-2 cursor-pointer" onclick="apdate_(${i})">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#2877b8" viewBox="0 0 256 256">
                                <path
                                d="M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z">
                                </path>
                            </svg>
                        </div>

                    <div id="delete" class="mx-2 cursor-pointer" onclick="delete_(${i})">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#ec0909" viewBox="0 0 256 256">
                            <path
                                d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z">
                            </path>
                        </svg>
                    </div>
                </div>
                </li>`;
            }
            
        };
    displayTasks();

    function delete_(i) {
        taskList.splice(i,1);
        localStorage.works = JSON.stringify(taskList);
        displayTasks();
    };
        
    function apdate_(i) {
        input.value = taskList[i].view;
        mode = 'apdate';
        input.onkeydown =function () {
            add.innerHTML = 'Update';  
        }
        
        tmp = i;
    };

        
    function right(i) {
        localStorage.works = JSON.stringify(taskList);
        };
    
        



    </script>



</body>
</html>